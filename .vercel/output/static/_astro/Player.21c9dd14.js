import{j as d}from"./jsx-runtime.a607968e.js";import{r as s,$ as R}from"./index.9da4b1b7.js";import{u as B,V as xe,a as he,b as ve,c as Se,P as be,d as ge}from"./playerStore.10e6a766.js";import"./index.8364f2d4.js";const we=({image:e,title:t,artists:n})=>{const[o,a]=s.useState(!0);return s.useEffect(()=>{e&&t&&n&&a(!1)},[e,t,n]),o?d.jsxs("div",{className:"flex items-center pt-[3px] pl-[1px] gap-x-4 rounded-lg w-[400px] h-[60px] duration-500",children:[d.jsx("div",{className:"relative rounded-md w-[55px] h-[55px] overflow-hidden",children:d.jsx("div",{className:"bg-zinc-900 w-full h-full"})}),d.jsxs("div",{className:"flex flex-col rounded-full w-[150px] h-[30px] space-y-2",children:[d.jsx("p",{className:"text-white rounded-full bg-zinc-900 w-full h-[20px]"}),d.jsx("p",{className:"text-neutral-400 text-xs rounded-full bg-zinc-900 w-full h-[20px]"})]})]}):d.jsxs("a",{className:`flex\r
          items-center\r
          pt-1\r
          gap-x-4\r
          rounded-lg`,children:[d.jsx("div",{className:`relative\r
          rounded-md\r
          w-[55px]\r
          h-[55px]\r
          overflow-hidden`,children:d.jsx("picture",{children:d.jsx("img",{src:e,alt:`Cover of ${t}}`})})}),d.jsxs("div",{className:"flex flex-col overflow-hidden",children:[d.jsx("p",{className:"text-white truncate",children:t}),d.jsx("p",{className:"text-neutral-400 text-sm truncate",children:n?.join(", ")})]})]})};function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},E.apply(this,arguments)}function J(e,[t,n]){return Math.min(n,Math.max(t,e))}function D(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e?.(a),n===!1||!a.defaultPrevented)return t?.(a)}}function ye(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function Q(...e){return t=>e.forEach(n=>ye(n,t))}function M(...e){return s.useCallback(Q(...e),e)}function ee(e,t=[]){let n=[];function o(r,i){const c=s.createContext(i),u=n.length;n=[...n,i];function f(l){const{scope:m,children:v,...p}=l,h=m?.[e][u]||c,x=s.useMemo(()=>p,Object.values(p));return s.createElement(h.Provider,{value:x},v)}function $(l,m){const v=m?.[e][u]||c,p=s.useContext(v);if(p)return p;if(i!==void 0)return i;throw new Error(`\`${l}\` must be used within \`${r}\``)}return f.displayName=r+"Provider",[f,$]}const a=()=>{const r=n.map(i=>s.createContext(i));return function(c){const u=c?.[e]||r;return s.useMemo(()=>({[`__scope${e}`]:{...c,[e]:u}}),[c,u])}};return a.scopeName=e,[o,Ee(a,...t)]}function Ee(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const o=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(r){const i=o.reduce((c,{useScope:u,scopeName:f})=>{const l=u(r)[`__scope${f}`];return{...c,...l}},{});return s.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}function te(e){const t=s.useRef(e);return s.useEffect(()=>{t.current=e}),s.useMemo(()=>(...n)=>{var o;return(o=t.current)===null||o===void 0?void 0:o.call(t,...n)},[])}function Ce({prop:e,defaultProp:t,onChange:n=()=>{}}){const[o,a]=Pe({defaultProp:t,onChange:n}),r=e!==void 0,i=r?e:o,c=te(n),u=s.useCallback(f=>{if(r){const l=typeof f=="function"?f(e):f;l!==e&&c(l)}else a(f)},[r,e,a,c]);return[i,u]}function Pe({defaultProp:e,onChange:t}){const n=s.useState(e),[o]=n,a=s.useRef(o),r=te(t);return s.useEffect(()=>{a.current!==o&&(r(o),a.current=o)},[o,a,r]),n}const Re=s.createContext(void 0);function Me(e){const t=s.useContext(Re);return e||t||"ltr"}function je(e){const t=s.useRef({value:e,previous:e});return s.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}const Ne=globalThis?.document?s.useLayoutEffect:()=>{};function _e(e){const[t,n]=s.useState(void 0);return Ne(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const o=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const r=a[0];let i,c;if("borderBoxSize"in r){const u=r.borderBoxSize,f=Array.isArray(u)?u[0]:u;i=f.inlineSize,c=f.blockSize}else i=e.offsetWidth,c=e.offsetHeight;n({width:i,height:c})});return o.observe(e,{box:"border-box"}),()=>o.unobserve(e)}else n(void 0)},[e]),t}const K=s.forwardRef((e,t)=>{const{children:n,...o}=e,a=s.Children.toArray(n),r=a.find(Ve);if(r){const i=r.props.children,c=a.map(u=>u===r?s.Children.count(i)>1?s.Children.only(null):s.isValidElement(i)?i.props.children:null:u);return s.createElement(L,E({},o,{ref:t}),s.isValidElement(i)?s.cloneElement(i,void 0,c):null)}return s.createElement(L,E({},o,{ref:t}),n)});K.displayName="Slot";const L=s.forwardRef((e,t)=>{const{children:n,...o}=e;return s.isValidElement(n)?s.cloneElement(n,{...Ie(o,n.props),ref:t?Q(t,n.ref):n.ref}):s.Children.count(n)>1?s.Children.only(null):null});L.displayName="SlotClone";const De=({children:e})=>s.createElement(s.Fragment,null,e);function Ve(e){return s.isValidElement(e)&&e.type===De}function Ie(e,t){const n={...t};for(const o in t){const a=e[o],r=t[o];/^on[A-Z]/.test(o)?a&&r?n[o]=(...c)=>{r(...c),a(...c)}:a&&(n[o]=a):o==="style"?n[o]={...a,...r}:o==="className"&&(n[o]=[a,r].filter(Boolean).join(" "))}return{...e,...n}}const Ae=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],O=Ae.reduce((e,t)=>{const n=s.forwardRef((o,a)=>{const{asChild:r,...i}=o,c=r?K:t;return s.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),s.createElement(c,E({},i,{ref:a}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function Te(e){const t=e+"CollectionProvider",[n,o]=ee(t),[a,r]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=v=>{const{scope:p,children:h}=v,x=R.useRef(null),b=R.useRef(new Map).current;return R.createElement(a,{scope:p,itemMap:b,collectionRef:x},h)},c=e+"CollectionSlot",u=R.forwardRef((v,p)=>{const{scope:h,children:x}=v,b=r(c,h),y=M(p,b.collectionRef);return R.createElement(K,{ref:y},x)}),f=e+"CollectionItemSlot",$="data-radix-collection-item",l=R.forwardRef((v,p)=>{const{scope:h,children:x,...b}=v,y=R.useRef(null),S=M(p,y),w=r(f,h);return R.useEffect(()=>(w.itemMap.set(y,{ref:y,...b}),()=>void w.itemMap.delete(y))),R.createElement(K,{[$]:"",ref:S},x)});function m(v){const p=r(e+"CollectionConsumer",v);return R.useCallback(()=>{const x=p.collectionRef.current;if(!x)return[];const b=Array.from(x.querySelectorAll(`[${$}]`));return Array.from(p.itemMap.values()).sort((w,j)=>b.indexOf(w.ref.current)-b.indexOf(j.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:i,Slot:u,ItemSlot:l},m,o]}const ne=["PageUp","PageDown"],oe=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],re={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},A="Slider",[H,Ke,Oe]=Te(A),[se,mt]=ee(A,[Oe]),[ke,k]=se(A),ze=s.forwardRef((e,t)=>{const{name:n,min:o=0,max:a=100,step:r=1,orientation:i="horizontal",disabled:c=!1,minStepsBetweenThumbs:u=0,defaultValue:f=[o],value:$,onValueChange:l=()=>{},onValueCommit:m=()=>{},inverted:v=!1,...p}=e,[h,x]=s.useState(null),b=M(t,g=>x(g)),y=s.useRef(new Set),S=s.useRef(0),w=i==="horizontal",j=h?!!h.closest("form"):!0,Y=w?Be:Le,[C=[],fe]=Ce({prop:$,defaultProp:f,onChange:g=>{var P;(P=[...y.current][S.current])===null||P===void 0||P.focus(),l(g)}}),W=s.useRef(C);function me(g){const P=Ze(C,g);V(g,P)}function pe(g){V(g,S.current)}function $e(){const g=W.current[S.current];C[S.current]!==g&&m(C)}function V(g,P,{commit:T}={commit:!1}){const X=tt(r),z=nt(Math.round((g-o)/r)*r+o,X),I=J(z,[o,a]);fe((_=[])=>{const N=Ge(_,I,P);if(et(N,u*r)){S.current=N.indexOf(I);const G=String(N)!==String(_);return G&&T&&m(N),G?N:_}else return _})}return s.createElement(ke,{scope:e.__scopeSlider,disabled:c,min:o,max:a,valueIndexToChangeRef:S,thumbs:y.current,values:C,orientation:i},s.createElement(H.Provider,{scope:e.__scopeSlider},s.createElement(H.Slot,{scope:e.__scopeSlider},s.createElement(Y,E({"aria-disabled":c,"data-disabled":c?"":void 0},p,{ref:b,onPointerDown:D(p.onPointerDown,()=>{c||(W.current=C)}),min:o,max:a,inverted:v,onSlideStart:c?void 0:me,onSlideMove:c?void 0:pe,onSlideEnd:c?void 0:$e,onHomeKeyDown:()=>!c&&V(o,0,{commit:!0}),onEndKeyDown:()=>!c&&V(a,C.length-1,{commit:!0}),onStepKeyDown:({event:g,direction:P})=>{if(!c){const z=ne.includes(g.key)||g.shiftKey&&oe.includes(g.key)?10:1,I=S.current,_=C[I],N=r*z*P;V(_+N,I,{commit:!0})}}})))),j&&C.map((g,P)=>s.createElement(Xe,{key:P,name:n?n+(C.length>1?"[]":""):void 0,value:g})))}),[ae,ce]=se(A,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Be=s.forwardRef((e,t)=>{const{min:n,max:o,dir:a,inverted:r,onSlideStart:i,onSlideMove:c,onSlideEnd:u,onStepKeyDown:f,...$}=e,[l,m]=s.useState(null),v=M(t,S=>m(S)),p=s.useRef(),h=Me(a),x=h==="ltr",b=x&&!r||!x&&r;function y(S){const w=p.current||l.getBoundingClientRect(),j=[0,w.width],C=U(j,b?[n,o]:[o,n]);return p.current=w,C(S-w.left)}return s.createElement(ae,{scope:e.__scopeSlider,startEdge:b?"left":"right",endEdge:b?"right":"left",direction:b?1:-1,size:"width"},s.createElement(ie,E({dir:h,"data-orientation":"horizontal"},$,{ref:v,style:{...$.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:S=>{const w=y(S.clientX);i?.(w)},onSlideMove:S=>{const w=y(S.clientX);c?.(w)},onSlideEnd:()=>{p.current=void 0,u?.()},onStepKeyDown:S=>{const j=re[b?"from-left":"from-right"].includes(S.key);f?.({event:S,direction:j?-1:1})}})))}),Le=s.forwardRef((e,t)=>{const{min:n,max:o,inverted:a,onSlideStart:r,onSlideMove:i,onSlideEnd:c,onStepKeyDown:u,...f}=e,$=s.useRef(null),l=M(t,$),m=s.useRef(),v=!a;function p(h){const x=m.current||$.current.getBoundingClientRect(),b=[0,x.height],S=U(b,v?[o,n]:[n,o]);return m.current=x,S(h-x.top)}return s.createElement(ae,{scope:e.__scopeSlider,startEdge:v?"bottom":"top",endEdge:v?"top":"bottom",size:"height",direction:v?1:-1},s.createElement(ie,E({"data-orientation":"vertical"},f,{ref:l,style:{...f.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:h=>{const x=p(h.clientY);r?.(x)},onSlideMove:h=>{const x=p(h.clientY);i?.(x)},onSlideEnd:()=>{m.current=void 0,c?.()},onStepKeyDown:h=>{const b=re[v?"from-bottom":"from-top"].includes(h.key);u?.({event:h,direction:b?-1:1})}})))}),ie=s.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:o,onSlideMove:a,onSlideEnd:r,onHomeKeyDown:i,onEndKeyDown:c,onStepKeyDown:u,...f}=e,$=k(A,n);return s.createElement(O.span,E({},f,{ref:t,onKeyDown:D(e.onKeyDown,l=>{l.key==="Home"?(i(l),l.preventDefault()):l.key==="End"?(c(l),l.preventDefault()):ne.concat(oe).includes(l.key)&&(u(l),l.preventDefault())}),onPointerDown:D(e.onPointerDown,l=>{const m=l.target;m.setPointerCapture(l.pointerId),l.preventDefault(),$.thumbs.has(m)?m.focus():o(l)}),onPointerMove:D(e.onPointerMove,l=>{l.target.hasPointerCapture(l.pointerId)&&a(l)}),onPointerUp:D(e.onPointerUp,l=>{const m=l.target;m.hasPointerCapture(l.pointerId)&&(m.releasePointerCapture(l.pointerId),r(l))})}))}),He="SliderTrack",Ue=s.forwardRef((e,t)=>{const{__scopeSlider:n,...o}=e,a=k(He,n);return s.createElement(O.span,E({"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation},o,{ref:t}))}),q="SliderRange",Fe=s.forwardRef((e,t)=>{const{__scopeSlider:n,...o}=e,a=k(q,n),r=ce(q,n),i=s.useRef(null),c=M(t,i),u=a.values.length,f=a.values.map(m=>le(m,a.min,a.max)),$=u>1?Math.min(...f):0,l=100-Math.max(...f);return s.createElement(O.span,E({"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0},o,{ref:c,style:{...e.style,[r.startEdge]:$+"%",[r.endEdge]:l+"%"}}))}),Z="SliderThumb",Ye=s.forwardRef((e,t)=>{const n=Ke(e.__scopeSlider),[o,a]=s.useState(null),r=M(t,c=>a(c)),i=s.useMemo(()=>o?n().findIndex(c=>c.ref.current===o):-1,[n,o]);return s.createElement(We,E({},e,{ref:r,index:i}))}),We=s.forwardRef((e,t)=>{const{__scopeSlider:n,index:o,...a}=e,r=k(Z,n),i=ce(Z,n),[c,u]=s.useState(null),f=M(t,x=>u(x)),$=_e(c),l=r.values[o],m=l===void 0?0:le(l,r.min,r.max),v=qe(o,r.values.length),p=$?.[i.size],h=p?Je(p,m,i.direction):0;return s.useEffect(()=>{if(c)return r.thumbs.add(c),()=>{r.thumbs.delete(c)}},[c,r.thumbs]),s.createElement("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[i.startEdge]:`calc(${m}% + ${h}px)`}},s.createElement(H.ItemSlot,{scope:e.__scopeSlider},s.createElement(O.span,E({role:"slider","aria-label":e["aria-label"]||v,"aria-valuemin":r.min,"aria-valuenow":l,"aria-valuemax":r.max,"aria-orientation":r.orientation,"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,tabIndex:r.disabled?void 0:0},a,{ref:f,style:l===void 0?{display:"none"}:e.style,onFocus:D(e.onFocus,()=>{r.valueIndexToChangeRef.current=o})}))))}),Xe=e=>{const{value:t,...n}=e,o=s.useRef(null),a=je(t);return s.useEffect(()=>{const r=o.current,i=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(i,"value").set;if(a!==t&&u){const f=new Event("input",{bubbles:!0});u.call(r,t),r.dispatchEvent(f)}},[a,t]),s.createElement("input",E({style:{display:"none"}},n,{ref:o,defaultValue:t}))};function Ge(e=[],t,n){const o=[...e];return o[n]=t,o.sort((a,r)=>a-r)}function le(e,t,n){const r=100/(n-t)*(e-t);return J(r,[0,100])}function qe(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function Ze(e,t){if(e.length===1)return 0;const n=e.map(a=>Math.abs(a-t)),o=Math.min(...n);return n.indexOf(o)}function Je(e,t,n){const o=e/2,r=U([0,50],[0,o]);return(o-r(t)*n)*n}function Qe(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function et(e,t){if(t>0){const n=Qe(e);return Math.min(...n)>=t}return!0}function U(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const o=(t[1]-t[0])/(e[1]-e[0]);return t[0]+o*(n-e[0])}}function tt(e){return(String(e).split(".")[1]||"").length}function nt(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}const ue=ze,ot=Ue,rt=Fe,st=Ye;function de(e){var t,n,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=de(e[t]))&&(o&&(o+=" "),o+=n);else for(t in e)e[t]&&(o&&(o+=" "),o+=t);return o}function at(){for(var e,t,n=0,o="";n<arguments.length;)(e=arguments[n++])&&(t=de(e))&&(o&&(o+=" "),o+=t);return o}const F=s.forwardRef(({className:e,...t},n)=>d.jsxs(ue,{ref:n,className:at("relative flex touch-none select-none items-center group",e),...t,children:[d.jsx(ot,{className:`\r
        relative \r
        h-1 \r
        w-full \r
        grow \r
        overflow-hidden \r
        rounded-full \r
        bg-[#535353]`,children:d.jsx(rt,{className:`\r
          absolute \r
          h-full \r
          bg-white\r
          group-hover:bg-green-400`})}),d.jsx(st,{className:`\r
      hidden\r
      group-hover:block \r
      h-3 \r
      w-3 \r
      rounded-full \r
      border \r
      border-primary/50 \r
      bg-white \r
      shadow \r
      transition-colors \r
      focus-visible:outline-none \r
      focus-visible:ring-1 \r
      focus-visible:ring-ring \r
      disabled:pointer-events-none \r
      disabled:opacity-50`})]}));F.displayName=ue.displayName;const ct=()=>{const e=B(r=>r.volume),t=B(r=>r.setVolume),n=s.useRef(e),o=e===0,a=()=>{if(o){t(n.current);return}else n.current=e,t(0)};return d.jsxs("div",{className:"flex justify-center gap-x-2 text-white",children:[d.jsx("button",{"aria-label":"Volumen",className:"opacity-70 hover:opacity-100",onClick:a,children:e<.01?d.jsx(xe,{}):e<.3?d.jsx(he,{}):e<.65?d.jsx(ve,{}):d.jsx(Se,{})}),d.jsx(F,{defaultValue:[100],max:100,min:0,value:[e*100],className:"w-[93px]",onValueChange:r=>{const[i]=r,c=i/100;t(c)}})]})},it=({audio:e})=>{const[t,n]=s.useState(0),o=e?.current?.duration??0;s.useEffect(()=>(e.current.addEventListener("timeupdate",a),()=>{e.current.removeEventListener("timeupdate",a)}),[]);const a=()=>{n(e.current.currentTime)},r=i=>{if(i===0)return"0:00";const c=Math.floor(i/60),u=Math.floor(i%60);return`${c}:${u.toString().padStart(2,"0")}`};return d.jsxs("div",{className:"flex gap-x-[10px] text-xs pt-[5px]",children:[d.jsx("span",{className:"text-white opacity-70 w-[23px] justify-center pt-[2px]",children:r(t)}),d.jsx(F,{defaultValue:[0],max:e?.current?.duration??0,min:0,value:[t],className:"w-[443px] mt-[2px]",onValueChange:i=>{e.current.currentTime=i}}),d.jsx("span",{className:"text-white opacity-70 text-xs w-[23px] justify-center pt-[2px]",children:o?r(o):"0:00"})]})},pt=()=>{const{currentMusic:e,isPlaying:t,setIsPlaying:n,volume:o,setCurrentMusic:a}=B(c=>c),r=s.useRef();s.useEffect(()=>{t?setTimeout(()=>{r.current.play()}):r.current.pause()},[t]),s.useEffect(()=>{r.current.volume=o},[o]),s.useEffect(()=>{const{song:c,playlist:u,songs:f}=e;if(c){const $=`/music/${u?.id}/0${c.id}.mp3`;r.current.src=$,r.current.volume=o,r.current.play()}r.current.onended=()=>{let $=f.findIndex(l=>l.id===c.id)+1;$>=f.length&&($=0),a({song:f[$],playlist:u,songs:f})}},[e]);const i=()=>{n(!t)};return d.jsxs("div",{className:"flex flex-row justify-between w-full h-[72px] px-1",children:[d.jsx("div",{className:"w-[200px] p-1",children:d.jsx(we,{...e.song})}),d.jsx("div",{className:"grid place-content-center flex-1",children:d.jsxs("div",{className:"flex justify-center flex-col items-center",children:[d.jsx("button",{"aria-label":"Play",className:"bg-white rounded-full p-2",onClick:i,children:t?d.jsx(be,{}):d.jsx(ge,{})}),d.jsx(it,{audio:r}),d.jsx("audio",{ref:r})]})}),d.jsx("div",{className:"grid place-content-center",children:d.jsx("div",{className:"w-[200px] pl-[11px]",children:d.jsx(ct,{})})})]})};export{pt as Player};
